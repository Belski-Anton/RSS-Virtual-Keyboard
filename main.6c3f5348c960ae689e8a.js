(()=>{"use strict";const e=document.createElement("h1");e.className="title",e.textContent="RSS Виртуальная клавиатура",document.body.append(e);const t=document.createElement("textarea");t.className="textarea",document.body.append(t);const n=document.createElement("div");n.className="keyboard",document.body.append(n);const s=document.createElement("div");s.className="keyboard none",document.body.append(s);const o=document.createElement("p");o.className="description",o.textContent="Клавиатура создана в операционной системе Windows",document.body.append(o);const a=document.createElement("p");a.className="language",a.textContent="Для переключения языка комбинация: левыe shift + alt",document.body.append(a);const c=["Backspace","Tab","Del","CapsLock","Enter","Shift","▲","Ctrl","Win","Alt","◄","▼","►","","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"];function l(e,t){e.forEach((e=>{const n=document.createElement("div");n.className="row",e.forEach(((e,t)=>{const s=document.createElement("span");s.className="key",s.innerHTML=e,n.append(s),c.includes(e)&&(s.className="Backspace"===e||"CapsLock"===e?"key bg-color w-100":"Tab"===e||"Del"===e?"key bg-color w-47":"Enter"===e?"key bg-color w-86":"Shift"===e?0===t?"key bg-color w-100":"key bg-color w-86":e?"key bg-color":"key  w-360")})),t.append(n)}))}t.setAttribute("autofocus","autofocus"),document.onclick=()=>{t.focus()},l([["~","1","2","3","4","5","6","7","8","9","0","-","+","Backspace"],["Tab","q","w","e","r","t","y","u","i","o","p","[","]","\\","Del"],["CapsLock","a","s","d","f","g","h","j","k","l",";","'","Enter"],["Shift","z","x","c","v","b","n","m",",",".","/","▲","Shift"],["Ctrl","Win","Alt","","Alt","◄","▼","►","Ctrl"]],n),l([["ё","1","2","3","4","5","6","7","8","9","0","-","+","Backspace"],["Tab","й","ц","у","к","е","н","г","ш","щ","з","х","ъ","\\","Del"],["CapsLock","ф","ы","в","а","п","р","о","л","д","ж","э","Enter"],["Shift","я","ч","с","м","и","т","ь","б","ю","ю","▲","Shift"],["Ctrl","Win","Alt","","Alt","◄","▼","►","Ctrl"]],s);const i=document.querySelectorAll(".key");let r=!1;i.forEach((e=>{e.addEventListener("mouseleave",(()=>{e.classList.remove("active")})),e.addEventListener("click",(()=>{if(e.classList.add("active"),c.includes(e.textContent))if(e.textContent){if("Enter"===e.textContent)t.value+="\n";else if("Backspace"===e.textContent){const e=t.selectionStart;if(0!==e){const{value:n}=t;t.value=n.slice(0,e-1)+n.slice(e),t.selectionStart=e-1,t.selectionEnd=e-1}}else if("Del"===e.textContent){const e=t.selectionStart,{value:n}=t;t.value=n.slice(0,e)+n.slice(e+1),t.selectionStart=e,t.selectionEnd=e}else if("◄"===e.textContent)t.value+="◄";else if("►"===e.textContent)t.value+="►";else if("▲"===e.textContent)t.value+="▲";else if("▼"===e.textContent)t.value+="▼";else if("CapsLock"===e.textContent){r=!r;for(const e of i)e.textContent.length<2&&(e.innerHTML=r?e.innerHTML.toUpperCase():e.innerHTML.toLowerCase())}}else t.value+=" ";else t.value+=e.textContent}))})),document.addEventListener("keydown",(e=>{const o=e.key,a=[...i].find((e=>e.textContent===o));if(a)a.classList.add("active"),setTimeout((()=>{a.classList.remove("active")}),300);else if("ControlLeft"===e.code){const e=[...i].find((e=>"Ctrl"===e.textContent));e.classList.add("active"),setTimeout((()=>{e.classList.remove("active")}),300)}if(e.altKey&&"Shift"===o||e.shiftKey&&"Alt"===o)n.classList.toggle("none"),s.classList.toggle("none");else if(c.includes(o)&&o){if("Tab"===o)e.preventDefault(),t.value+="  ";else if("ArrowUp"===o){const e=[...i].find((e=>"▲"===e.textContent));e.classList.add("active"),setTimeout((()=>{e.classList.remove("active")}),300),t.value+="▲"}else if("ArrowDown"===o){const e=[...i].find((e=>"▼"===e.textContent));e.classList.add("active"),setTimeout((()=>{e.classList.remove("active")}),300),t.value+="▼"}else if("ArrowLeft"===o){const e=[...i].find((e=>"◄"===e.textContent));e.classList.add("active"),setTimeout((()=>{e.classList.remove("active")}),300),t.value+="◄"}else if("ArrowRight"===o){const e=[...i].find((e=>"►"===e.textContent));e.classList.add("active"),setTimeout((()=>{e.classList.remove("active")}),300),t.value+="►"}else if("CapsLock"===o){r=!r;for(const e of i)e.textContent.length<2&&(e.innerHTML=r?e.innerHTML.toUpperCase():e.innerHTML.toLowerCase())}}else t.focus()}))})();